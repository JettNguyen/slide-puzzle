<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Slide Puzzle Solver</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header with navigation and color customization -->
        <header>
            <h1>Puzzle Solver</h1>
            <p class="subtitle">Set up your puzzle and let the solver find the answer</p>
            <div class="header-controls">
                <a href="index.html" class="btn btn-secondary btn-small">
                    <i class="fas fa-arrow-left"></i> Back to Game
                </a>
                <button id="customize-colors-btn" class="btn btn-tertiary btn-small">
                    <i class="fas fa-palette"></i> Change Colors
                </button>
            </div>
        </header>

        <main>
            <!-- Two side-by-side puzzle boards for editing -->
            <div class="solver-layout">
                <div class="board-section">
                    <h2>Initial State</h2>
                    <p class="board-description">Drag tiles to edit the starting position</p>
                    <div class="puzzle-wrapper">
                        <div id="initial-board" class="puzzle-board editable-board"></div>
                    </div>
                    <div class="board-controls">
                        <button id="reset-initial-btn" class="btn btn-secondary btn-small">
                            <i class="fas fa-puzzle-piece"></i> Reset to Solved
                        </button>
                        <button id="randomize-initial-btn" class="btn btn-tertiary btn-small">
                            <i class="fas fa-dice"></i> Randomize
                        </button>
                    </div>
                </div>

                <div class="board-section">
                    <h2>Target State</h2>
                    <p class="board-description">Drag tiles to edit the desired arrangement</p>
                    <div class="puzzle-wrapper">
                        <div id="target-board" class="puzzle-board editable-board"></div>
                    </div>
                    <div class="board-controls">
                        <button id="reset-target-btn" class="btn btn-secondary btn-small">
                            <i class="fas fa-puzzle-piece"></i> Reset to Solved
                        </button>
                        <button id="swap-boards-btn" class="btn btn-tertiary btn-small">
                            <i class="fas fa-exchange-alt"></i> Swap Boards
                        </button>
                    </div>
                </div>
            </div>

            <!-- Solution finder and step-by-step viewer -->
            <div class="solve-section">
                <button id="solve-btn" class="btn btn-primary btn-large solve-button">
                    <i class="fas fa-lightbulb"></i>
                    <span>Find Solution</span>
                </button>
            </div>

            <div id="solution-display" class="solution-display hidden">
                <h2>Solution Found!</h2>

                <div class="solution-demo">
                    <h3>Step-by-Step Solution</h3>
                    <div class="puzzle-wrapper solution-board-wrapper">
                        <div id="solution-board" class="puzzle-board solution-board"></div>
                    </div>
                </div>

                <div class="solution-controls">
                    <div class="step-navigation">
                        <button id="first-step-btn" class="btn btn-step" onclick="solverController.goToStep(0)" disabled>
                            <i class="fas fa-fast-backward"></i> First
                        </button>
                        <button id="prev-step-btn" class="btn btn-step" onclick="solverController.previousStep()" disabled>
                            <i class="fas fa-chevron-left"></i> Back
                        </button>
                        <button id="play-solution-btn" class="btn btn-primary btn-step" onclick="solverController.togglePlay()">
                            <i class="fas fa-play"></i> Play
                        </button>
                        <button id="next-step-btn" class="btn btn-step" onclick="solverController.nextStep()" disabled>
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                        <button id="last-step-btn" class="btn btn-step" onclick="solverController.goToLastStep()" disabled>
                            Last <i class="fas fa-fast-forward"></i>
                        </button>
                    </div>
                    <div class="speed-control">
                        <label for="speed-slider">Speed:</label>
                        <input type="range" id="speed-slider" class="speed-slider" min="0.2" max="3" step="0.1" value="1">
                        <span id="speed-display" class="speed-display">1.0x</span>
                    </div>
                    <div class="step-info-display">
                        <span class="step-counter">Step <span id="current-step">0</span> of <span id="total-steps">0</span></span>
                    </div>
                </div>

                <!-- Progress bar for solving process -->
                <div class="progress-container" id="solving-progress" style="display: none;">
                    <div class="progress-label">Solving puzzle...</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-status" id="progress-status">Starting...</div>
                </div>

                <div class="solution-steps-container">
                    <h3>Move Sequence</h3>
                    <div id="solution-steps" class="solution-steps"></div>
                </div>

                <div class="export-controls">
                    <button id="copy-solution-btn" class="btn btn-secondary btn-utility" onclick="solverController.copySolution()">
                        <i class="fas fa-copy"></i> Copy Solution
                    </button>
                    <button id="new-solve-btn" class="btn btn-tertiary btn-utility" onclick="solverController.resetSolver()">
                        <i class="fas fa-refresh"></i> Reset Solver
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Color Customization Modal -->
    <div id="color-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Customize Colors</h2>
                <button id="close-modal-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="color-section">
                    <div class="color-group">
                        <label for="bg-color">Background Color</label>
                        <input type="color" id="bg-color" class="color-picker" value="#1a1a2e">
                    </div>
                    <div class="color-group">
                        <label for="board-bg-color">Game Board Background</label>
                        <input type="color" id="board-bg-color" class="color-picker" value="#0a1128">
                    </div>
                    <div class="color-group">
                        <label for="odd-color">Odd Number Tiles (1, 3, 5...)</label>
                        <input type="color" id="odd-color" class="color-picker" value="#dc143c">
                    </div>
                    <div class="color-group">
                        <label for="even-color">Even Number Tiles (2, 4, 6...)</label>
                        <input type="color" id="even-color" class="color-picker" value="#f8f9fa">
                    </div>
                    <div class="color-group">
                        <label for="text-color">Text Color</label>
                        <input type="color" id="text-color" class="color-picker" value="#f8f9fa">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="reset-colors-btn" class="btn btn-secondary">Reset to Default</button>
                <button id="save-colors-btn" class="btn btn-primary">Apply Colors</button>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div id="loading-modal" class="modal" style="display: none;">
        <div class="modal-content loading-modal">
            <div class="modal-body">
                <div class="loading-content">
                    <div class="loading-spinner">
                        <div class="spinner-ring"></div>
                        <div class="spinner-ring"></div>
                        <div class="spinner-ring"></div>
                        <div class="spinner-ring"></div>
                    </div>
                    <h3 class="loading-title">Solving Puzzle...</h3>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="solve-progress-fill"></div>
                        </div>
                        <div class="progress-text">
                            <span id="progress-percentage">0%</span>
                            <span id="progress-details">Initializing solver...</span>
                        </div>
                    </div>
                    <div class="solving-stats">
                        <div class="stat-row">
                            <span class="stat-label">Nodes Explored:</span>
                            <span class="stat-value" id="nodes-explored">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Current Depth:</span>
                            <span class="stat-value" id="current-depth">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Elapsed Time:</span>
                            <span class="stat-value" id="elapsed-time">0.0s</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Modal -->
    <div id="notification-modal" class="modal" style="display: none;">
        <div class="modal-content notification-modal">
            <div class="modal-header">
                <h2 id="notification-title">Notice</h2>
                <button class="close-btn" id="close-notification">&times;</button>
            </div>
            <div class="modal-body">
                <div class="notification-content" id="notification-content">
                    Message goes here
                </div>
            </div>
            <div class="modal-footer">
                <button id="notification-ok" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>

    <script type="module" src="solver-page.js"></script>
</body>
</html>
